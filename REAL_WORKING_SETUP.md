# üöÄ Real Working NIDS Setup Guide

## ‚ö†Ô∏è Important: Live Packet Capture Limitations

**Live packet capture (`live_nids.py`) requires:**
- Root/administrator privileges
- Direct access to network interfaces
- **This WILL NOT work on Render or most cloud platforms**

## ‚úÖ Real Working Solutions

### Option 1: Local Development (Recommended for Real Packet Capture)

Run the system locally where you have full system access:

#### Step 1: Start Backend (Live Packet Capture)

**Terminal 1 - Start NIDS Backend:**
```bash
cd /Users/yashsingh/NIDS_Projectt

# On macOS/Linux, you need sudo for packet capture
sudo python live_nids.py
```

**Note:** This requires administrator/root privileges because packet capture needs access to network interfaces.

#### Step 2: Start Frontend (Dashboard)

**Terminal 2 - Start Dashboard:**
```bash
cd /Users/yashsingh/NIDS_Projectt
streamlit run dashboard.py
```

The dashboard will automatically read from:
- `alerts.log` - Generated by `live_nids.py`
- `nids_stats.txt` - Generated by `live_nids.py`

#### Step 3: Access Dashboard

Open your browser:
```
http://localhost:8501
```

**You'll see real-time data from actual network traffic!**

---

### Option 2: Cloud Deployment with PCAP Processing (Works on Render)

If you want to deploy on Render with **real data** (not demo), you can process PCAP files:

#### Step 1: Prepare PCAP Files

1. **Capture network traffic locally:**
   ```bash
   # On your local machine (requires sudo)
   sudo tcpdump -i any -w capture.pcap
   # Or use Wireshark to capture and save as .pcap
   ```

2. **Upload PCAP files to your repository:**
   ```bash
   mkdir pcap_files
   # Copy your .pcap files here
   git add pcap_files/*.pcap
   git commit -m "Add PCAP files for processing"
   git push
   ```

#### Step 2: Update Render to Process PCAP Files

**Update `render.yaml` or Render settings:**

**Start Command:**
```bash
python process_pcap.py pcap_files/capture.pcap 0.1
```

Or for continuous processing:
```bash
python process_pcap.py
```
(This will watch the `pcap_files` directory)

#### Step 3: Update Dashboard Startup

**Update `start_with_data.py` to use PCAP processing:**
```python
# Instead of demo data, process real PCAP files
python process_pcap.py pcap_files/capture.pcap 0.1 &
streamlit run dashboard.py --server.port=$PORT --server.address=0.0.0.0
```

---

### Option 3: Hybrid Setup (Best for Production)

**Local Machine:**
- Run `live_nids.py` to capture real-time traffic
- Export alerts/stats to a shared location (database, API, etc.)

**Render/Cloud:**
- Dashboard reads from shared data source
- Or use PCAP files uploaded periodically

---

## üìã Step-by-Step: Local Real-Time Setup

### Prerequisites

1. **Python dependencies installed:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Model files present:**
   - `nids_model.pkl`
   - `le_proto.pkl`

3. **Administrator access** (for packet capture)

### Complete Setup

**1. Open Terminal 1 - Backend:**
```bash
cd /Users/yashsingh/NIDS_Projectt
sudo python live_nids.py
```

You should see:
```
============================================================
NETWORK INTRUSION DETECTION SYSTEM - ACTIVE
============================================================
Model: Random Forest with X estimators
Monitoring: All IP traffic
Alert Log: alerts.log
Statistics: nids_stats.txt
============================================================

Listening for traffic... (Press Ctrl+C to stop)
```

**2. Open Terminal 2 - Frontend:**
```bash
cd /Users/yashsingh/NIDS_Projectt
streamlit run dashboard.py
```

You should see:
```
You can now view your Streamlit app in your browser.

Local URL: http://localhost:8501
Network URL: http://192.168.x.x:8501
```

**3. Open Browser:**
- Go to `http://localhost:8501`
- You'll see real-time network traffic analysis!

---

## üîß For Render Deployment (Real Data)

### Method 1: Process PCAP Files

1. **Create `start_real_pcap.py`:**
```python
import subprocess
import sys
import os
import threading
import time

def process_pcap():
    """Process PCAP files in background"""
    pcap_file = os.environ.get('PCAP_FILE', 'pcap_files/capture.pcap')
    if os.path.exists(pcap_file):
        subprocess.run([sys.executable, 'process_pcap.py', pcap_file, '0.1'])
    else:
        print(f"PCAP file not found: {pcap_file}")

if __name__ == "__main__":
    # Start PCAP processing in background
    pcap_thread = threading.Thread(target=process_pcap, daemon=True)
    pcap_thread.start()
    time.sleep(5)
    
    # Start dashboard
    port = os.environ.get('PORT', '8501')
    subprocess.run([
        sys.executable, "-m", "streamlit", "run", "dashboard.py",
        "--server.port", port,
        "--server.address", "0.0.0.0",
        "--server.headless", "true"
    ])
```

2. **Update Render Start Command:**
```
python start_real_pcap.py
```

3. **Add PCAP files to repository:**
```bash
mkdir pcap_files
# Add your .pcap files
git add pcap_files/
git commit -m "Add PCAP files"
git push
```

### Method 2: Use External Packet Capture Service

- Set up a separate VPS/server with packet capture capability
- Send data to your Render dashboard via API
- Process and display in real-time

---

## üéØ Recommended Setup

**For Development/Testing:**
- ‚úÖ Use **Option 1** (Local setup)
- Run `live_nids.py` locally with sudo
- Run `dashboard.py` locally
- Access at `localhost:8501`

**For Production/Cloud:**
- ‚úÖ Use **Option 2** (PCAP processing on Render)
- Upload PCAP files to repository
- Process them on Render
- Dashboard displays real analysis results

---

## üìù Quick Commands Reference

**Local Real-Time (Terminal 1):**
```bash
sudo python live_nids.py
```

**Local Dashboard (Terminal 2):**
```bash
streamlit run dashboard.py
```

**Process PCAP File:**
```bash
python process_pcap.py path/to/file.pcap
```

**Continuous PCAP Processing:**
```bash
python process_pcap.py
# (watches pcap_files/ directory)
```

---

## üÜò Troubleshooting

**"Permission denied" when running live_nids.py:**
- Use `sudo python live_nids.py` (macOS/Linux)
- Or run as Administrator (Windows)

**No packets captured:**
- Check network interface is active
- Verify you have traffic on your network
- Try: `sudo tcpdump -i any` to test capture

**Dashboard shows no data:**
- Ensure `live_nids.py` is running
- Check `alerts.log` and `nids_stats.txt` exist
- Verify files are in the same directory

**On Render - PCAP processing:**
- Ensure PCAP files are in repository
- Check file paths in `process_pcap.py`
- Verify model files are present

---

## ‚úÖ Summary

**For Real-Time Local Setup:**
1. Terminal 1: `sudo python live_nids.py`
2. Terminal 2: `streamlit run dashboard.py`
3. Browser: `http://localhost:8501`

**For Cloud Deployment:**
1. Use `process_pcap.py` to process captured files
2. Upload PCAP files to repository
3. Deploy with PCAP processing enabled

---

**Your system is now ready for real network intrusion detection!** üõ°Ô∏è

